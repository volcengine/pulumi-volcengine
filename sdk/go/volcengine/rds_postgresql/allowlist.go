// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package rds_postgresql

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/volcengine/pulumi-volcengine/sdk/go/volcengine/internal"
)

// Provides a resource to manage rds postgresql allowlist
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/volcengine/pulumi-volcengine/sdk/go/volcengine/rds_postgresql"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := rds_postgresql.NewAllowlist(ctx, "foo", &rds_postgresql.AllowlistArgs{
//				AllowLists: pulumi.StringArray{
//					pulumi.String("10.0.0.0/24"),
//				},
//				AllowListDesc: pulumi.String("acc-test"),
//				AllowListName: pulumi.String("acc-test-allowlist"),
//				AllowListType: pulumi.String("IPv4"),
//				SecurityGroupBindInfos: rds_postgresql.AllowlistSecurityGroupBindInfoArray{
//					&rds_postgresql.AllowlistSecurityGroupBindInfoArgs{
//						BindMode:        pulumi.String("IngressDirectionIp"),
//						SecurityGroupId: pulumi.String("sg-1jojfhw8rca9s1n7ampztrq6w"),
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			_, err = rds_postgresql.NewAllowlist(ctx, "example", &rds_postgresql.AllowlistArgs{
//				AllowListName: pulumi.String("unify_new"),
//				InstanceIds: pulumi.StringArray{
//					pulumi.String("postgres-72715e0d9f58"),
//					pulumi.String("postgres-eb3a578a6d73"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// RdsPostgresqlAllowlist can be imported using the id, e.g.
//
// ```sh
// $ pulumi import volcengine:rds_postgresql/allowlist:Allowlist default resource_id
// ```
type Allowlist struct {
	pulumi.CustomResourceState

	// The category of the allow list. Valid values: Ordinary, Default. When this parameter is used as a request parameter, there is no default value.
	AllowListCategory pulumi.StringOutput `pulumi:"allowListCategory"`
	// The description of the postgresql allow list.
	AllowListDesc pulumi.StringPtrOutput `pulumi:"allowListDesc"`
	// The name of the postgresql allow list.
	AllowListName pulumi.StringOutput `pulumi:"allowListName"`
	// The type of IP address in the whitelist. Currently only `IPv4` addresses are supported.
	AllowListType pulumi.StringOutput `pulumi:"allowListType"`
	// Enter an IP address or a range of IP addresses in CIDR format. This field cannot be used together with the userAllowList field.
	AllowLists pulumi.StringArrayOutput `pulumi:"allowLists"`
	// The total number of instances bound under the whitelist.
	AssociatedInstanceNum pulumi.IntOutput `pulumi:"associatedInstanceNum"`
	// The list of postgresql instances.
	AssociatedInstances AllowlistAssociatedInstanceArrayOutput `pulumi:"associatedInstances"`
	// IDs of PostgreSQL instances to unify allowlists. When set, creation uses UnifyNewAllowList to merge existing instance allowlists into a new one. Supports merging and generating allowlists of up to 300 instances.
	InstanceIds pulumi.StringArrayOutput `pulumi:"instanceIds"`
	// The information of security groups to bind with the allow list.
	SecurityGroupBindInfos AllowlistSecurityGroupBindInfoArrayOutput `pulumi:"securityGroupBindInfos"`
	// Whether to update the security groups bound to the allowlist when modifying.
	UpdateSecurityGroup pulumi.BoolPtrOutput `pulumi:"updateSecurityGroup"`
	// IP addresses outside security groups to be added to the allowlist. Cannot be used with allow_list.
	UserAllowLists pulumi.StringArrayOutput `pulumi:"userAllowLists"`
}

// NewAllowlist registers a new resource with the given unique name, arguments, and options.
func NewAllowlist(ctx *pulumi.Context,
	name string, args *AllowlistArgs, opts ...pulumi.ResourceOption) (*Allowlist, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.AllowListName == nil {
		return nil, errors.New("invalid value for required argument 'AllowListName'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource Allowlist
	err := ctx.RegisterResource("volcengine:rds_postgresql/allowlist:Allowlist", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetAllowlist gets an existing Allowlist resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetAllowlist(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *AllowlistState, opts ...pulumi.ResourceOption) (*Allowlist, error) {
	var resource Allowlist
	err := ctx.ReadResource("volcengine:rds_postgresql/allowlist:Allowlist", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering Allowlist resources.
type allowlistState struct {
	// The category of the allow list. Valid values: Ordinary, Default. When this parameter is used as a request parameter, there is no default value.
	AllowListCategory *string `pulumi:"allowListCategory"`
	// The description of the postgresql allow list.
	AllowListDesc *string `pulumi:"allowListDesc"`
	// The name of the postgresql allow list.
	AllowListName *string `pulumi:"allowListName"`
	// The type of IP address in the whitelist. Currently only `IPv4` addresses are supported.
	AllowListType *string `pulumi:"allowListType"`
	// Enter an IP address or a range of IP addresses in CIDR format. This field cannot be used together with the userAllowList field.
	AllowLists []string `pulumi:"allowLists"`
	// The total number of instances bound under the whitelist.
	AssociatedInstanceNum *int `pulumi:"associatedInstanceNum"`
	// The list of postgresql instances.
	AssociatedInstances []AllowlistAssociatedInstance `pulumi:"associatedInstances"`
	// IDs of PostgreSQL instances to unify allowlists. When set, creation uses UnifyNewAllowList to merge existing instance allowlists into a new one. Supports merging and generating allowlists of up to 300 instances.
	InstanceIds []string `pulumi:"instanceIds"`
	// The information of security groups to bind with the allow list.
	SecurityGroupBindInfos []AllowlistSecurityGroupBindInfo `pulumi:"securityGroupBindInfos"`
	// Whether to update the security groups bound to the allowlist when modifying.
	UpdateSecurityGroup *bool `pulumi:"updateSecurityGroup"`
	// IP addresses outside security groups to be added to the allowlist. Cannot be used with allow_list.
	UserAllowLists []string `pulumi:"userAllowLists"`
}

type AllowlistState struct {
	// The category of the allow list. Valid values: Ordinary, Default. When this parameter is used as a request parameter, there is no default value.
	AllowListCategory pulumi.StringPtrInput
	// The description of the postgresql allow list.
	AllowListDesc pulumi.StringPtrInput
	// The name of the postgresql allow list.
	AllowListName pulumi.StringPtrInput
	// The type of IP address in the whitelist. Currently only `IPv4` addresses are supported.
	AllowListType pulumi.StringPtrInput
	// Enter an IP address or a range of IP addresses in CIDR format. This field cannot be used together with the userAllowList field.
	AllowLists pulumi.StringArrayInput
	// The total number of instances bound under the whitelist.
	AssociatedInstanceNum pulumi.IntPtrInput
	// The list of postgresql instances.
	AssociatedInstances AllowlistAssociatedInstanceArrayInput
	// IDs of PostgreSQL instances to unify allowlists. When set, creation uses UnifyNewAllowList to merge existing instance allowlists into a new one. Supports merging and generating allowlists of up to 300 instances.
	InstanceIds pulumi.StringArrayInput
	// The information of security groups to bind with the allow list.
	SecurityGroupBindInfos AllowlistSecurityGroupBindInfoArrayInput
	// Whether to update the security groups bound to the allowlist when modifying.
	UpdateSecurityGroup pulumi.BoolPtrInput
	// IP addresses outside security groups to be added to the allowlist. Cannot be used with allow_list.
	UserAllowLists pulumi.StringArrayInput
}

func (AllowlistState) ElementType() reflect.Type {
	return reflect.TypeOf((*allowlistState)(nil)).Elem()
}

type allowlistArgs struct {
	// The category of the allow list. Valid values: Ordinary, Default. When this parameter is used as a request parameter, there is no default value.
	AllowListCategory *string `pulumi:"allowListCategory"`
	// The description of the postgresql allow list.
	AllowListDesc *string `pulumi:"allowListDesc"`
	// The name of the postgresql allow list.
	AllowListName string `pulumi:"allowListName"`
	// The type of IP address in the whitelist. Currently only `IPv4` addresses are supported.
	AllowListType *string `pulumi:"allowListType"`
	// Enter an IP address or a range of IP addresses in CIDR format. This field cannot be used together with the userAllowList field.
	AllowLists []string `pulumi:"allowLists"`
	// IDs of PostgreSQL instances to unify allowlists. When set, creation uses UnifyNewAllowList to merge existing instance allowlists into a new one. Supports merging and generating allowlists of up to 300 instances.
	InstanceIds []string `pulumi:"instanceIds"`
	// The information of security groups to bind with the allow list.
	SecurityGroupBindInfos []AllowlistSecurityGroupBindInfo `pulumi:"securityGroupBindInfos"`
	// Whether to update the security groups bound to the allowlist when modifying.
	UpdateSecurityGroup *bool `pulumi:"updateSecurityGroup"`
	// IP addresses outside security groups to be added to the allowlist. Cannot be used with allow_list.
	UserAllowLists []string `pulumi:"userAllowLists"`
}

// The set of arguments for constructing a Allowlist resource.
type AllowlistArgs struct {
	// The category of the allow list. Valid values: Ordinary, Default. When this parameter is used as a request parameter, there is no default value.
	AllowListCategory pulumi.StringPtrInput
	// The description of the postgresql allow list.
	AllowListDesc pulumi.StringPtrInput
	// The name of the postgresql allow list.
	AllowListName pulumi.StringInput
	// The type of IP address in the whitelist. Currently only `IPv4` addresses are supported.
	AllowListType pulumi.StringPtrInput
	// Enter an IP address or a range of IP addresses in CIDR format. This field cannot be used together with the userAllowList field.
	AllowLists pulumi.StringArrayInput
	// IDs of PostgreSQL instances to unify allowlists. When set, creation uses UnifyNewAllowList to merge existing instance allowlists into a new one. Supports merging and generating allowlists of up to 300 instances.
	InstanceIds pulumi.StringArrayInput
	// The information of security groups to bind with the allow list.
	SecurityGroupBindInfos AllowlistSecurityGroupBindInfoArrayInput
	// Whether to update the security groups bound to the allowlist when modifying.
	UpdateSecurityGroup pulumi.BoolPtrInput
	// IP addresses outside security groups to be added to the allowlist. Cannot be used with allow_list.
	UserAllowLists pulumi.StringArrayInput
}

func (AllowlistArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*allowlistArgs)(nil)).Elem()
}

type AllowlistInput interface {
	pulumi.Input

	ToAllowlistOutput() AllowlistOutput
	ToAllowlistOutputWithContext(ctx context.Context) AllowlistOutput
}

func (*Allowlist) ElementType() reflect.Type {
	return reflect.TypeOf((**Allowlist)(nil)).Elem()
}

func (i *Allowlist) ToAllowlistOutput() AllowlistOutput {
	return i.ToAllowlistOutputWithContext(context.Background())
}

func (i *Allowlist) ToAllowlistOutputWithContext(ctx context.Context) AllowlistOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AllowlistOutput)
}

// AllowlistArrayInput is an input type that accepts AllowlistArray and AllowlistArrayOutput values.
// You can construct a concrete instance of `AllowlistArrayInput` via:
//
//	AllowlistArray{ AllowlistArgs{...} }
type AllowlistArrayInput interface {
	pulumi.Input

	ToAllowlistArrayOutput() AllowlistArrayOutput
	ToAllowlistArrayOutputWithContext(context.Context) AllowlistArrayOutput
}

type AllowlistArray []AllowlistInput

func (AllowlistArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Allowlist)(nil)).Elem()
}

func (i AllowlistArray) ToAllowlistArrayOutput() AllowlistArrayOutput {
	return i.ToAllowlistArrayOutputWithContext(context.Background())
}

func (i AllowlistArray) ToAllowlistArrayOutputWithContext(ctx context.Context) AllowlistArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AllowlistArrayOutput)
}

// AllowlistMapInput is an input type that accepts AllowlistMap and AllowlistMapOutput values.
// You can construct a concrete instance of `AllowlistMapInput` via:
//
//	AllowlistMap{ "key": AllowlistArgs{...} }
type AllowlistMapInput interface {
	pulumi.Input

	ToAllowlistMapOutput() AllowlistMapOutput
	ToAllowlistMapOutputWithContext(context.Context) AllowlistMapOutput
}

type AllowlistMap map[string]AllowlistInput

func (AllowlistMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Allowlist)(nil)).Elem()
}

func (i AllowlistMap) ToAllowlistMapOutput() AllowlistMapOutput {
	return i.ToAllowlistMapOutputWithContext(context.Background())
}

func (i AllowlistMap) ToAllowlistMapOutputWithContext(ctx context.Context) AllowlistMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AllowlistMapOutput)
}

type AllowlistOutput struct{ *pulumi.OutputState }

func (AllowlistOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**Allowlist)(nil)).Elem()
}

func (o AllowlistOutput) ToAllowlistOutput() AllowlistOutput {
	return o
}

func (o AllowlistOutput) ToAllowlistOutputWithContext(ctx context.Context) AllowlistOutput {
	return o
}

// The category of the allow list. Valid values: Ordinary, Default. When this parameter is used as a request parameter, there is no default value.
func (o AllowlistOutput) AllowListCategory() pulumi.StringOutput {
	return o.ApplyT(func(v *Allowlist) pulumi.StringOutput { return v.AllowListCategory }).(pulumi.StringOutput)
}

// The description of the postgresql allow list.
func (o AllowlistOutput) AllowListDesc() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *Allowlist) pulumi.StringPtrOutput { return v.AllowListDesc }).(pulumi.StringPtrOutput)
}

// The name of the postgresql allow list.
func (o AllowlistOutput) AllowListName() pulumi.StringOutput {
	return o.ApplyT(func(v *Allowlist) pulumi.StringOutput { return v.AllowListName }).(pulumi.StringOutput)
}

// The type of IP address in the whitelist. Currently only `IPv4` addresses are supported.
func (o AllowlistOutput) AllowListType() pulumi.StringOutput {
	return o.ApplyT(func(v *Allowlist) pulumi.StringOutput { return v.AllowListType }).(pulumi.StringOutput)
}

// Enter an IP address or a range of IP addresses in CIDR format. This field cannot be used together with the userAllowList field.
func (o AllowlistOutput) AllowLists() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *Allowlist) pulumi.StringArrayOutput { return v.AllowLists }).(pulumi.StringArrayOutput)
}

// The total number of instances bound under the whitelist.
func (o AllowlistOutput) AssociatedInstanceNum() pulumi.IntOutput {
	return o.ApplyT(func(v *Allowlist) pulumi.IntOutput { return v.AssociatedInstanceNum }).(pulumi.IntOutput)
}

// The list of postgresql instances.
func (o AllowlistOutput) AssociatedInstances() AllowlistAssociatedInstanceArrayOutput {
	return o.ApplyT(func(v *Allowlist) AllowlistAssociatedInstanceArrayOutput { return v.AssociatedInstances }).(AllowlistAssociatedInstanceArrayOutput)
}

// IDs of PostgreSQL instances to unify allowlists. When set, creation uses UnifyNewAllowList to merge existing instance allowlists into a new one. Supports merging and generating allowlists of up to 300 instances.
func (o AllowlistOutput) InstanceIds() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *Allowlist) pulumi.StringArrayOutput { return v.InstanceIds }).(pulumi.StringArrayOutput)
}

// The information of security groups to bind with the allow list.
func (o AllowlistOutput) SecurityGroupBindInfos() AllowlistSecurityGroupBindInfoArrayOutput {
	return o.ApplyT(func(v *Allowlist) AllowlistSecurityGroupBindInfoArrayOutput { return v.SecurityGroupBindInfos }).(AllowlistSecurityGroupBindInfoArrayOutput)
}

// Whether to update the security groups bound to the allowlist when modifying.
func (o AllowlistOutput) UpdateSecurityGroup() pulumi.BoolPtrOutput {
	return o.ApplyT(func(v *Allowlist) pulumi.BoolPtrOutput { return v.UpdateSecurityGroup }).(pulumi.BoolPtrOutput)
}

// IP addresses outside security groups to be added to the allowlist. Cannot be used with allow_list.
func (o AllowlistOutput) UserAllowLists() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *Allowlist) pulumi.StringArrayOutput { return v.UserAllowLists }).(pulumi.StringArrayOutput)
}

type AllowlistArrayOutput struct{ *pulumi.OutputState }

func (AllowlistArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Allowlist)(nil)).Elem()
}

func (o AllowlistArrayOutput) ToAllowlistArrayOutput() AllowlistArrayOutput {
	return o
}

func (o AllowlistArrayOutput) ToAllowlistArrayOutputWithContext(ctx context.Context) AllowlistArrayOutput {
	return o
}

func (o AllowlistArrayOutput) Index(i pulumi.IntInput) AllowlistOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *Allowlist {
		return vs[0].([]*Allowlist)[vs[1].(int)]
	}).(AllowlistOutput)
}

type AllowlistMapOutput struct{ *pulumi.OutputState }

func (AllowlistMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Allowlist)(nil)).Elem()
}

func (o AllowlistMapOutput) ToAllowlistMapOutput() AllowlistMapOutput {
	return o
}

func (o AllowlistMapOutput) ToAllowlistMapOutputWithContext(ctx context.Context) AllowlistMapOutput {
	return o
}

func (o AllowlistMapOutput) MapIndex(k pulumi.StringInput) AllowlistOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *Allowlist {
		return vs[0].(map[string]*Allowlist)[vs[1].(string)]
	}).(AllowlistOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*AllowlistInput)(nil)).Elem(), &Allowlist{})
	pulumi.RegisterInputType(reflect.TypeOf((*AllowlistArrayInput)(nil)).Elem(), AllowlistArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*AllowlistMapInput)(nil)).Elem(), AllowlistMap{})
	pulumi.RegisterOutputType(AllowlistOutput{})
	pulumi.RegisterOutputType(AllowlistArrayOutput{})
	pulumi.RegisterOutputType(AllowlistMapOutput{})
}
