// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package rds_postgresql

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/volcengine/pulumi-volcengine/sdk/go/volcengine/internal"
)

// Provides a resource to manage rds postgresql backup policy
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/volcengine/pulumi-volcengine/sdk/go/volcengine/rds_postgresql"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := rds_postgresql.NewBackupPolicy(ctx, "example", &rds_postgresql.BackupPolicyArgs{
//				BackupRetentionPeriod:    pulumi.Int(7),
//				DataIncrBackupPeriods:    pulumi.String("Tuesday,Sunday"),
//				FullBackupPeriod:         pulumi.String("Monday,Wednesday,Friday"),
//				FullBackupTime:           pulumi.String("18:00Z-19:00Z"),
//				HourlyIncrBackupEnable:   pulumi.Bool(true),
//				IncrementBackupFrequency: pulumi.Int(12),
//				InstanceId:               pulumi.String("postgres-72715e0d9f58"),
//				WalLogSpaceLimitEnable:   pulumi.Bool(false),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// RdsPostgresqlBackupPolicy can be imported using the id, e.g.
//
// ```sh
// $ pulumi import volcengine:rds_postgresql/backupPolicy:BackupPolicy default resource_id
// ```
type BackupPolicy struct {
	pulumi.CustomResourceState

	// The number of days to retain backups, with a value range of 7 to 365.
	BackupRetentionPeriod pulumi.IntPtrOutput `pulumi:"backupRetentionPeriod"`
	// The incremental backup method follows the backup frequency for normal increments, with multiple values separated by English commas (,). The selected values must not overlap with the full backup cycle. Can select at most six days a week for incremental backup.
	DataIncrBackupPeriods pulumi.StringPtrOutput `pulumi:"dataIncrBackupPeriods"`
	// Full backup period. Separate multiple values with an English comma (,).Select at least one day per week for a full backup.
	FullBackupPeriod pulumi.StringPtrOutput `pulumi:"fullBackupPeriod"`
	// The time when the backup task is executed. Format: HH:mmZ-HH:mmZ (UTC time).
	FullBackupTime pulumi.StringPtrOutput `pulumi:"fullBackupTime"`
	// Whether to enable the high-frequency backup function. To disable incremental backup, need to pass an empty string for the parameter dataIncrBackupPeriods and pass false for the parameter hourly_incr_backup_enable.
	HourlyIncrBackupEnable pulumi.BoolPtrOutput `pulumi:"hourlyIncrBackupEnable"`
	// The method of incremental backup is the backup frequency for high-frequency increments. The Unit: hours. The valid values are 1, 2, 4, 6, and 12.
	IncrementBackupFrequency pulumi.IntPtrOutput `pulumi:"incrementBackupFrequency"`
	// The id of the PostgreSQL instance.
	InstanceId pulumi.StringOutput `pulumi:"instanceId"`
	// Status of the local remaining available space protection function. When enabled, it will automatically start clearing the earliest local WAL logs when the total storage space usage rate of the instance exceeds 80% or the remaining space is less than 5GB, until the total space usage rate is below 80% and the remaining space is greater than 5GB.
	WalLogSpaceLimitEnable pulumi.BoolPtrOutput `pulumi:"walLogSpaceLimitEnable"`
}

// NewBackupPolicy registers a new resource with the given unique name, arguments, and options.
func NewBackupPolicy(ctx *pulumi.Context,
	name string, args *BackupPolicyArgs, opts ...pulumi.ResourceOption) (*BackupPolicy, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.InstanceId == nil {
		return nil, errors.New("invalid value for required argument 'InstanceId'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource BackupPolicy
	err := ctx.RegisterResource("volcengine:rds_postgresql/backupPolicy:BackupPolicy", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetBackupPolicy gets an existing BackupPolicy resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetBackupPolicy(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *BackupPolicyState, opts ...pulumi.ResourceOption) (*BackupPolicy, error) {
	var resource BackupPolicy
	err := ctx.ReadResource("volcengine:rds_postgresql/backupPolicy:BackupPolicy", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering BackupPolicy resources.
type backupPolicyState struct {
	// The number of days to retain backups, with a value range of 7 to 365.
	BackupRetentionPeriod *int `pulumi:"backupRetentionPeriod"`
	// The incremental backup method follows the backup frequency for normal increments, with multiple values separated by English commas (,). The selected values must not overlap with the full backup cycle. Can select at most six days a week for incremental backup.
	DataIncrBackupPeriods *string `pulumi:"dataIncrBackupPeriods"`
	// Full backup period. Separate multiple values with an English comma (,).Select at least one day per week for a full backup.
	FullBackupPeriod *string `pulumi:"fullBackupPeriod"`
	// The time when the backup task is executed. Format: HH:mmZ-HH:mmZ (UTC time).
	FullBackupTime *string `pulumi:"fullBackupTime"`
	// Whether to enable the high-frequency backup function. To disable incremental backup, need to pass an empty string for the parameter dataIncrBackupPeriods and pass false for the parameter hourly_incr_backup_enable.
	HourlyIncrBackupEnable *bool `pulumi:"hourlyIncrBackupEnable"`
	// The method of incremental backup is the backup frequency for high-frequency increments. The Unit: hours. The valid values are 1, 2, 4, 6, and 12.
	IncrementBackupFrequency *int `pulumi:"incrementBackupFrequency"`
	// The id of the PostgreSQL instance.
	InstanceId *string `pulumi:"instanceId"`
	// Status of the local remaining available space protection function. When enabled, it will automatically start clearing the earliest local WAL logs when the total storage space usage rate of the instance exceeds 80% or the remaining space is less than 5GB, until the total space usage rate is below 80% and the remaining space is greater than 5GB.
	WalLogSpaceLimitEnable *bool `pulumi:"walLogSpaceLimitEnable"`
}

type BackupPolicyState struct {
	// The number of days to retain backups, with a value range of 7 to 365.
	BackupRetentionPeriod pulumi.IntPtrInput
	// The incremental backup method follows the backup frequency for normal increments, with multiple values separated by English commas (,). The selected values must not overlap with the full backup cycle. Can select at most six days a week for incremental backup.
	DataIncrBackupPeriods pulumi.StringPtrInput
	// Full backup period. Separate multiple values with an English comma (,).Select at least one day per week for a full backup.
	FullBackupPeriod pulumi.StringPtrInput
	// The time when the backup task is executed. Format: HH:mmZ-HH:mmZ (UTC time).
	FullBackupTime pulumi.StringPtrInput
	// Whether to enable the high-frequency backup function. To disable incremental backup, need to pass an empty string for the parameter dataIncrBackupPeriods and pass false for the parameter hourly_incr_backup_enable.
	HourlyIncrBackupEnable pulumi.BoolPtrInput
	// The method of incremental backup is the backup frequency for high-frequency increments. The Unit: hours. The valid values are 1, 2, 4, 6, and 12.
	IncrementBackupFrequency pulumi.IntPtrInput
	// The id of the PostgreSQL instance.
	InstanceId pulumi.StringPtrInput
	// Status of the local remaining available space protection function. When enabled, it will automatically start clearing the earliest local WAL logs when the total storage space usage rate of the instance exceeds 80% or the remaining space is less than 5GB, until the total space usage rate is below 80% and the remaining space is greater than 5GB.
	WalLogSpaceLimitEnable pulumi.BoolPtrInput
}

func (BackupPolicyState) ElementType() reflect.Type {
	return reflect.TypeOf((*backupPolicyState)(nil)).Elem()
}

type backupPolicyArgs struct {
	// The number of days to retain backups, with a value range of 7 to 365.
	BackupRetentionPeriod *int `pulumi:"backupRetentionPeriod"`
	// The incremental backup method follows the backup frequency for normal increments, with multiple values separated by English commas (,). The selected values must not overlap with the full backup cycle. Can select at most six days a week for incremental backup.
	DataIncrBackupPeriods *string `pulumi:"dataIncrBackupPeriods"`
	// Full backup period. Separate multiple values with an English comma (,).Select at least one day per week for a full backup.
	FullBackupPeriod *string `pulumi:"fullBackupPeriod"`
	// The time when the backup task is executed. Format: HH:mmZ-HH:mmZ (UTC time).
	FullBackupTime *string `pulumi:"fullBackupTime"`
	// Whether to enable the high-frequency backup function. To disable incremental backup, need to pass an empty string for the parameter dataIncrBackupPeriods and pass false for the parameter hourly_incr_backup_enable.
	HourlyIncrBackupEnable *bool `pulumi:"hourlyIncrBackupEnable"`
	// The method of incremental backup is the backup frequency for high-frequency increments. The Unit: hours. The valid values are 1, 2, 4, 6, and 12.
	IncrementBackupFrequency *int `pulumi:"incrementBackupFrequency"`
	// The id of the PostgreSQL instance.
	InstanceId string `pulumi:"instanceId"`
	// Status of the local remaining available space protection function. When enabled, it will automatically start clearing the earliest local WAL logs when the total storage space usage rate of the instance exceeds 80% or the remaining space is less than 5GB, until the total space usage rate is below 80% and the remaining space is greater than 5GB.
	WalLogSpaceLimitEnable *bool `pulumi:"walLogSpaceLimitEnable"`
}

// The set of arguments for constructing a BackupPolicy resource.
type BackupPolicyArgs struct {
	// The number of days to retain backups, with a value range of 7 to 365.
	BackupRetentionPeriod pulumi.IntPtrInput
	// The incremental backup method follows the backup frequency for normal increments, with multiple values separated by English commas (,). The selected values must not overlap with the full backup cycle. Can select at most six days a week for incremental backup.
	DataIncrBackupPeriods pulumi.StringPtrInput
	// Full backup period. Separate multiple values with an English comma (,).Select at least one day per week for a full backup.
	FullBackupPeriod pulumi.StringPtrInput
	// The time when the backup task is executed. Format: HH:mmZ-HH:mmZ (UTC time).
	FullBackupTime pulumi.StringPtrInput
	// Whether to enable the high-frequency backup function. To disable incremental backup, need to pass an empty string for the parameter dataIncrBackupPeriods and pass false for the parameter hourly_incr_backup_enable.
	HourlyIncrBackupEnable pulumi.BoolPtrInput
	// The method of incremental backup is the backup frequency for high-frequency increments. The Unit: hours. The valid values are 1, 2, 4, 6, and 12.
	IncrementBackupFrequency pulumi.IntPtrInput
	// The id of the PostgreSQL instance.
	InstanceId pulumi.StringInput
	// Status of the local remaining available space protection function. When enabled, it will automatically start clearing the earliest local WAL logs when the total storage space usage rate of the instance exceeds 80% or the remaining space is less than 5GB, until the total space usage rate is below 80% and the remaining space is greater than 5GB.
	WalLogSpaceLimitEnable pulumi.BoolPtrInput
}

func (BackupPolicyArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*backupPolicyArgs)(nil)).Elem()
}

type BackupPolicyInput interface {
	pulumi.Input

	ToBackupPolicyOutput() BackupPolicyOutput
	ToBackupPolicyOutputWithContext(ctx context.Context) BackupPolicyOutput
}

func (*BackupPolicy) ElementType() reflect.Type {
	return reflect.TypeOf((**BackupPolicy)(nil)).Elem()
}

func (i *BackupPolicy) ToBackupPolicyOutput() BackupPolicyOutput {
	return i.ToBackupPolicyOutputWithContext(context.Background())
}

func (i *BackupPolicy) ToBackupPolicyOutputWithContext(ctx context.Context) BackupPolicyOutput {
	return pulumi.ToOutputWithContext(ctx, i).(BackupPolicyOutput)
}

// BackupPolicyArrayInput is an input type that accepts BackupPolicyArray and BackupPolicyArrayOutput values.
// You can construct a concrete instance of `BackupPolicyArrayInput` via:
//
//	BackupPolicyArray{ BackupPolicyArgs{...} }
type BackupPolicyArrayInput interface {
	pulumi.Input

	ToBackupPolicyArrayOutput() BackupPolicyArrayOutput
	ToBackupPolicyArrayOutputWithContext(context.Context) BackupPolicyArrayOutput
}

type BackupPolicyArray []BackupPolicyInput

func (BackupPolicyArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*BackupPolicy)(nil)).Elem()
}

func (i BackupPolicyArray) ToBackupPolicyArrayOutput() BackupPolicyArrayOutput {
	return i.ToBackupPolicyArrayOutputWithContext(context.Background())
}

func (i BackupPolicyArray) ToBackupPolicyArrayOutputWithContext(ctx context.Context) BackupPolicyArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(BackupPolicyArrayOutput)
}

// BackupPolicyMapInput is an input type that accepts BackupPolicyMap and BackupPolicyMapOutput values.
// You can construct a concrete instance of `BackupPolicyMapInput` via:
//
//	BackupPolicyMap{ "key": BackupPolicyArgs{...} }
type BackupPolicyMapInput interface {
	pulumi.Input

	ToBackupPolicyMapOutput() BackupPolicyMapOutput
	ToBackupPolicyMapOutputWithContext(context.Context) BackupPolicyMapOutput
}

type BackupPolicyMap map[string]BackupPolicyInput

func (BackupPolicyMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*BackupPolicy)(nil)).Elem()
}

func (i BackupPolicyMap) ToBackupPolicyMapOutput() BackupPolicyMapOutput {
	return i.ToBackupPolicyMapOutputWithContext(context.Background())
}

func (i BackupPolicyMap) ToBackupPolicyMapOutputWithContext(ctx context.Context) BackupPolicyMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(BackupPolicyMapOutput)
}

type BackupPolicyOutput struct{ *pulumi.OutputState }

func (BackupPolicyOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**BackupPolicy)(nil)).Elem()
}

func (o BackupPolicyOutput) ToBackupPolicyOutput() BackupPolicyOutput {
	return o
}

func (o BackupPolicyOutput) ToBackupPolicyOutputWithContext(ctx context.Context) BackupPolicyOutput {
	return o
}

// The number of days to retain backups, with a value range of 7 to 365.
func (o BackupPolicyOutput) BackupRetentionPeriod() pulumi.IntPtrOutput {
	return o.ApplyT(func(v *BackupPolicy) pulumi.IntPtrOutput { return v.BackupRetentionPeriod }).(pulumi.IntPtrOutput)
}

// The incremental backup method follows the backup frequency for normal increments, with multiple values separated by English commas (,). The selected values must not overlap with the full backup cycle. Can select at most six days a week for incremental backup.
func (o BackupPolicyOutput) DataIncrBackupPeriods() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *BackupPolicy) pulumi.StringPtrOutput { return v.DataIncrBackupPeriods }).(pulumi.StringPtrOutput)
}

// Full backup period. Separate multiple values with an English comma (,).Select at least one day per week for a full backup.
func (o BackupPolicyOutput) FullBackupPeriod() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *BackupPolicy) pulumi.StringPtrOutput { return v.FullBackupPeriod }).(pulumi.StringPtrOutput)
}

// The time when the backup task is executed. Format: HH:mmZ-HH:mmZ (UTC time).
func (o BackupPolicyOutput) FullBackupTime() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *BackupPolicy) pulumi.StringPtrOutput { return v.FullBackupTime }).(pulumi.StringPtrOutput)
}

// Whether to enable the high-frequency backup function. To disable incremental backup, need to pass an empty string for the parameter dataIncrBackupPeriods and pass false for the parameter hourly_incr_backup_enable.
func (o BackupPolicyOutput) HourlyIncrBackupEnable() pulumi.BoolPtrOutput {
	return o.ApplyT(func(v *BackupPolicy) pulumi.BoolPtrOutput { return v.HourlyIncrBackupEnable }).(pulumi.BoolPtrOutput)
}

// The method of incremental backup is the backup frequency for high-frequency increments. The Unit: hours. The valid values are 1, 2, 4, 6, and 12.
func (o BackupPolicyOutput) IncrementBackupFrequency() pulumi.IntPtrOutput {
	return o.ApplyT(func(v *BackupPolicy) pulumi.IntPtrOutput { return v.IncrementBackupFrequency }).(pulumi.IntPtrOutput)
}

// The id of the PostgreSQL instance.
func (o BackupPolicyOutput) InstanceId() pulumi.StringOutput {
	return o.ApplyT(func(v *BackupPolicy) pulumi.StringOutput { return v.InstanceId }).(pulumi.StringOutput)
}

// Status of the local remaining available space protection function. When enabled, it will automatically start clearing the earliest local WAL logs when the total storage space usage rate of the instance exceeds 80% or the remaining space is less than 5GB, until the total space usage rate is below 80% and the remaining space is greater than 5GB.
func (o BackupPolicyOutput) WalLogSpaceLimitEnable() pulumi.BoolPtrOutput {
	return o.ApplyT(func(v *BackupPolicy) pulumi.BoolPtrOutput { return v.WalLogSpaceLimitEnable }).(pulumi.BoolPtrOutput)
}

type BackupPolicyArrayOutput struct{ *pulumi.OutputState }

func (BackupPolicyArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*BackupPolicy)(nil)).Elem()
}

func (o BackupPolicyArrayOutput) ToBackupPolicyArrayOutput() BackupPolicyArrayOutput {
	return o
}

func (o BackupPolicyArrayOutput) ToBackupPolicyArrayOutputWithContext(ctx context.Context) BackupPolicyArrayOutput {
	return o
}

func (o BackupPolicyArrayOutput) Index(i pulumi.IntInput) BackupPolicyOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *BackupPolicy {
		return vs[0].([]*BackupPolicy)[vs[1].(int)]
	}).(BackupPolicyOutput)
}

type BackupPolicyMapOutput struct{ *pulumi.OutputState }

func (BackupPolicyMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*BackupPolicy)(nil)).Elem()
}

func (o BackupPolicyMapOutput) ToBackupPolicyMapOutput() BackupPolicyMapOutput {
	return o
}

func (o BackupPolicyMapOutput) ToBackupPolicyMapOutputWithContext(ctx context.Context) BackupPolicyMapOutput {
	return o
}

func (o BackupPolicyMapOutput) MapIndex(k pulumi.StringInput) BackupPolicyOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *BackupPolicy {
		return vs[0].(map[string]*BackupPolicy)[vs[1].(string)]
	}).(BackupPolicyOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*BackupPolicyInput)(nil)).Elem(), &BackupPolicy{})
	pulumi.RegisterInputType(reflect.TypeOf((*BackupPolicyArrayInput)(nil)).Elem(), BackupPolicyArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*BackupPolicyMapInput)(nil)).Elem(), BackupPolicyMap{})
	pulumi.RegisterOutputType(BackupPolicyOutput{})
	pulumi.RegisterOutputType(BackupPolicyArrayOutput{})
	pulumi.RegisterOutputType(BackupPolicyMapOutput{})
}
