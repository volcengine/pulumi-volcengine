// *** WARNING: this file was generated by the Pulumi Terraform Bridge (tfgen) Tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.Volcengine.Rds_postgresql
{
    /// <summary>
    /// Provides a resource to manage rds postgresql database endpoint
    /// ## Example Usage
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using Volcengine = Pulumi.Volcengine;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var cluster = new Volcengine.Rds_postgresql.DatabaseEndpoint("cluster", new()
    ///     {
    ///         EndpointId = "postgres-72715e0d9f58-cluster",
    ///         EndpointName = "默认终端",
    ///         EndpointType = "Cluster",
    ///         InstanceId = "postgres-72715e0d9f58",
    ///         ReadOnlyNodeDistributionType = "Custom",
    ///         ReadOnlyNodeMaxDelayTime = 40,
    ///         ReadWriteMode = "ReadWrite",
    ///         ReadWriteProxyConnection = 20,
    ///         WriteNodeHaltWriting = false,
    ///         ReadWriteSplitting = true,
    ///         ReadOnlyNodeWeights = new[]
    ///         {
    ///             new Volcengine.Rds_postgresql.Inputs.DatabaseEndpointReadOnlyNodeWeightArgs
    ///             {
    ///                 NodeId = null,
    ///                 NodeType = "Primary",
    ///                 Weight = 200,
    ///             },
    ///         },
    ///         DnsVisibility = true,
    ///         Port = "5432",
    ///     });
    /// 
    ///     var example = new Volcengine.Rds_postgresql.DatabaseEndpoint("example", new()
    ///     {
    ///         InstanceId = "postgres-72715e0d9f58",
    ///         EndpointName = "tf-test",
    ///         EndpointType = "Custom",
    ///         Nodes = "Primary",
    ///         ReadWriteMode = "ReadWrite",
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// ## Import
    /// 
    /// RdsPostgresqlDatabaseEndpoint can be imported using the id, e.g.
    /// 
    /// ```sh
    /// $ pulumi import volcengine:rds_postgresql/databaseEndpoint:DatabaseEndpoint default resource_id
    /// ```
    /// </summary>
    [VolcengineResourceType("volcengine:rds_postgresql/databaseEndpoint:DatabaseEndpoint")]
    public partial class DatabaseEndpoint : global::Pulumi.CustomResource
    {
        /// <summary>
        /// Whether to enable public network resolution. false: Default value, Volcano Engine private network resolution. true: Volcano Engine private network and public network resolution. Do not set this field when creating a endpoint.
        /// </summary>
        [Output("dnsVisibility")]
        public Output<bool> DnsVisibility { get; private set; } = null!;

        /// <summary>
        /// Private address domain prefix to modify. Do not set this field when creating a endpoint.
        /// </summary>
        [Output("domainPrefix")]
        public Output<string?> DomainPrefix { get; private set; } = null!;

        /// <summary>
        /// The ID of the connection endpoint. The ID of the default endpoint is in the form of instance_id-cluster.
        /// </summary>
        [Output("endpointId")]
        public Output<string> EndpointId { get; private set; } = null!;

        /// <summary>
        /// The name of the connection endpoint. If not provided, the connection endpoint will be automatically named Custom Endpoint.
        /// </summary>
        [Output("endpointName")]
        public Output<string> EndpointName { get; private set; } = null!;

        /// <summary>
        /// Type of the connection endpoint. Valid values: `Custom`(custom endpoint), `Cluster`(default endpoint). When create a new
        /// endpoint, the value must be `Custom`. The default cluster endpoint does not support creation; you can use import to
        /// bring it under Terraform management.
        /// </summary>
        [Output("endpointType")]
        public Output<string?> EndpointType { get; private set; } = null!;

        /// <summary>
        /// Whether to enable the global read-only mode for the instance. There is no default value. If no value is passed, the request will be ignored. Do not set this field when creating a endpoint.
        /// </summary>
        [Output("globalReadOnly")]
        public Output<bool?> GlobalReadOnly { get; private set; } = null!;

        /// <summary>
        /// The ID of the RDS PostgreSQL instance.
        /// </summary>
        [Output("instanceId")]
        public Output<string> InstanceId { get; private set; } = null!;

        /// <summary>
        /// List of nodes configured for the connection endpoint. Required when EndpointType is Custom. The primary node does not need to pass the node ID; it is sufficient to pass the string "Primary".
        /// </summary>
        [Output("nodes")]
        public Output<string?> Nodes { get; private set; } = null!;

        /// <summary>
        /// Private address port to modify. The value range is 1000~65534. Do not set this field when creating a endpoint.
        /// </summary>
        [Output("port")]
        public Output<string> Port { get; private set; } = null!;

        /// <summary>
        /// Read-only weight distribution mode, Default or Custom. Default: Standard weight allocation. Custom: Custom weight allocation.
        /// </summary>
        [Output("readOnlyNodeDistributionType")]
        public Output<string> ReadOnlyNodeDistributionType { get; private set; } = null!;

        /// <summary>
        /// The maximum delay threshold for read-only nodes. When the delay time of a read-only node exceeds this value, read traffic will not be sent to that node. The value range is 0~3600. Default value is 30 seconds.
        /// </summary>
        [Output("readOnlyNodeMaxDelayTime")]
        public Output<int> ReadOnlyNodeMaxDelayTime { get; private set; } = null!;

        /// <summary>
        /// Custom read weight allocation. This parameter needs to be set when the value of read_only_node_distribution_type is Custom.
        /// </summary>
        [Output("readOnlyNodeWeights")]
        public Output<ImmutableArray<Outputs.DatabaseEndpointReadOnlyNodeWeight>> ReadOnlyNodeWeights { get; private set; } = null!;

        /// <summary>
        /// ReadWrite or ReadOnly.
        /// </summary>
        [Output("readWriteMode")]
        public Output<string?> ReadWriteMode { get; private set; } = null!;

        /// <summary>
        /// The number of proxy connections set for the terminal after enabling read-write separation. The minimum value of the proxy connection count is 20.
        /// </summary>
        [Output("readWriteProxyConnection")]
        public Output<int> ReadWriteProxyConnection { get; private set; } = null!;

        /// <summary>
        /// Whether to enable read-write separation. Only default endpoint supports this feature.
        /// </summary>
        [Output("readWriteSplitting")]
        public Output<bool> ReadWriteSplitting { get; private set; } = null!;

        /// <summary>
        /// Whether to prohibit the terminal from sending write requests to the write node. To avoid having no available connection endpoints to carry write operations, this configuration can only be enabled when the instance has other read-write endpoints.
        /// </summary>
        [Output("writeNodeHaltWriting")]
        public Output<bool> WriteNodeHaltWriting { get; private set; } = null!;


        /// <summary>
        /// Create a DatabaseEndpoint resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public DatabaseEndpoint(string name, DatabaseEndpointArgs args, CustomResourceOptions? options = null)
            : base("volcengine:rds_postgresql/databaseEndpoint:DatabaseEndpoint", name, args ?? new DatabaseEndpointArgs(), MakeResourceOptions(options, ""))
        {
        }

        private DatabaseEndpoint(string name, Input<string> id, DatabaseEndpointState? state = null, CustomResourceOptions? options = null)
            : base("volcengine:rds_postgresql/databaseEndpoint:DatabaseEndpoint", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
                PluginDownloadURL = "github://api.github.com/volcengine",
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing DatabaseEndpoint resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static DatabaseEndpoint Get(string name, Input<string> id, DatabaseEndpointState? state = null, CustomResourceOptions? options = null)
        {
            return new DatabaseEndpoint(name, id, state, options);
        }
    }

    public sealed class DatabaseEndpointArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Whether to enable public network resolution. false: Default value, Volcano Engine private network resolution. true: Volcano Engine private network and public network resolution. Do not set this field when creating a endpoint.
        /// </summary>
        [Input("dnsVisibility")]
        public Input<bool>? DnsVisibility { get; set; }

        /// <summary>
        /// Private address domain prefix to modify. Do not set this field when creating a endpoint.
        /// </summary>
        [Input("domainPrefix")]
        public Input<string>? DomainPrefix { get; set; }

        /// <summary>
        /// The ID of the connection endpoint. The ID of the default endpoint is in the form of instance_id-cluster.
        /// </summary>
        [Input("endpointId")]
        public Input<string>? EndpointId { get; set; }

        /// <summary>
        /// The name of the connection endpoint. If not provided, the connection endpoint will be automatically named Custom Endpoint.
        /// </summary>
        [Input("endpointName", required: true)]
        public Input<string> EndpointName { get; set; } = null!;

        /// <summary>
        /// Type of the connection endpoint. Valid values: `Custom`(custom endpoint), `Cluster`(default endpoint). When create a new
        /// endpoint, the value must be `Custom`. The default cluster endpoint does not support creation; you can use import to
        /// bring it under Terraform management.
        /// </summary>
        [Input("endpointType")]
        public Input<string>? EndpointType { get; set; }

        /// <summary>
        /// Whether to enable the global read-only mode for the instance. There is no default value. If no value is passed, the request will be ignored. Do not set this field when creating a endpoint.
        /// </summary>
        [Input("globalReadOnly")]
        public Input<bool>? GlobalReadOnly { get; set; }

        /// <summary>
        /// The ID of the RDS PostgreSQL instance.
        /// </summary>
        [Input("instanceId", required: true)]
        public Input<string> InstanceId { get; set; } = null!;

        /// <summary>
        /// List of nodes configured for the connection endpoint. Required when EndpointType is Custom. The primary node does not need to pass the node ID; it is sufficient to pass the string "Primary".
        /// </summary>
        [Input("nodes")]
        public Input<string>? Nodes { get; set; }

        /// <summary>
        /// Private address port to modify. The value range is 1000~65534. Do not set this field when creating a endpoint.
        /// </summary>
        [Input("port")]
        public Input<string>? Port { get; set; }

        /// <summary>
        /// Read-only weight distribution mode, Default or Custom. Default: Standard weight allocation. Custom: Custom weight allocation.
        /// </summary>
        [Input("readOnlyNodeDistributionType")]
        public Input<string>? ReadOnlyNodeDistributionType { get; set; }

        /// <summary>
        /// The maximum delay threshold for read-only nodes. When the delay time of a read-only node exceeds this value, read traffic will not be sent to that node. The value range is 0~3600. Default value is 30 seconds.
        /// </summary>
        [Input("readOnlyNodeMaxDelayTime")]
        public Input<int>? ReadOnlyNodeMaxDelayTime { get; set; }

        [Input("readOnlyNodeWeights")]
        private InputList<Inputs.DatabaseEndpointReadOnlyNodeWeightArgs>? _readOnlyNodeWeights;

        /// <summary>
        /// Custom read weight allocation. This parameter needs to be set when the value of read_only_node_distribution_type is Custom.
        /// </summary>
        public InputList<Inputs.DatabaseEndpointReadOnlyNodeWeightArgs> ReadOnlyNodeWeights
        {
            get => _readOnlyNodeWeights ?? (_readOnlyNodeWeights = new InputList<Inputs.DatabaseEndpointReadOnlyNodeWeightArgs>());
            set => _readOnlyNodeWeights = value;
        }

        /// <summary>
        /// ReadWrite or ReadOnly.
        /// </summary>
        [Input("readWriteMode")]
        public Input<string>? ReadWriteMode { get; set; }

        /// <summary>
        /// The number of proxy connections set for the terminal after enabling read-write separation. The minimum value of the proxy connection count is 20.
        /// </summary>
        [Input("readWriteProxyConnection")]
        public Input<int>? ReadWriteProxyConnection { get; set; }

        /// <summary>
        /// Whether to enable read-write separation. Only default endpoint supports this feature.
        /// </summary>
        [Input("readWriteSplitting")]
        public Input<bool>? ReadWriteSplitting { get; set; }

        /// <summary>
        /// Whether to prohibit the terminal from sending write requests to the write node. To avoid having no available connection endpoints to carry write operations, this configuration can only be enabled when the instance has other read-write endpoints.
        /// </summary>
        [Input("writeNodeHaltWriting")]
        public Input<bool>? WriteNodeHaltWriting { get; set; }

        public DatabaseEndpointArgs()
        {
        }
        public static new DatabaseEndpointArgs Empty => new DatabaseEndpointArgs();
    }

    public sealed class DatabaseEndpointState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Whether to enable public network resolution. false: Default value, Volcano Engine private network resolution. true: Volcano Engine private network and public network resolution. Do not set this field when creating a endpoint.
        /// </summary>
        [Input("dnsVisibility")]
        public Input<bool>? DnsVisibility { get; set; }

        /// <summary>
        /// Private address domain prefix to modify. Do not set this field when creating a endpoint.
        /// </summary>
        [Input("domainPrefix")]
        public Input<string>? DomainPrefix { get; set; }

        /// <summary>
        /// The ID of the connection endpoint. The ID of the default endpoint is in the form of instance_id-cluster.
        /// </summary>
        [Input("endpointId")]
        public Input<string>? EndpointId { get; set; }

        /// <summary>
        /// The name of the connection endpoint. If not provided, the connection endpoint will be automatically named Custom Endpoint.
        /// </summary>
        [Input("endpointName")]
        public Input<string>? EndpointName { get; set; }

        /// <summary>
        /// Type of the connection endpoint. Valid values: `Custom`(custom endpoint), `Cluster`(default endpoint). When create a new
        /// endpoint, the value must be `Custom`. The default cluster endpoint does not support creation; you can use import to
        /// bring it under Terraform management.
        /// </summary>
        [Input("endpointType")]
        public Input<string>? EndpointType { get; set; }

        /// <summary>
        /// Whether to enable the global read-only mode for the instance. There is no default value. If no value is passed, the request will be ignored. Do not set this field when creating a endpoint.
        /// </summary>
        [Input("globalReadOnly")]
        public Input<bool>? GlobalReadOnly { get; set; }

        /// <summary>
        /// The ID of the RDS PostgreSQL instance.
        /// </summary>
        [Input("instanceId")]
        public Input<string>? InstanceId { get; set; }

        /// <summary>
        /// List of nodes configured for the connection endpoint. Required when EndpointType is Custom. The primary node does not need to pass the node ID; it is sufficient to pass the string "Primary".
        /// </summary>
        [Input("nodes")]
        public Input<string>? Nodes { get; set; }

        /// <summary>
        /// Private address port to modify. The value range is 1000~65534. Do not set this field when creating a endpoint.
        /// </summary>
        [Input("port")]
        public Input<string>? Port { get; set; }

        /// <summary>
        /// Read-only weight distribution mode, Default or Custom. Default: Standard weight allocation. Custom: Custom weight allocation.
        /// </summary>
        [Input("readOnlyNodeDistributionType")]
        public Input<string>? ReadOnlyNodeDistributionType { get; set; }

        /// <summary>
        /// The maximum delay threshold for read-only nodes. When the delay time of a read-only node exceeds this value, read traffic will not be sent to that node. The value range is 0~3600. Default value is 30 seconds.
        /// </summary>
        [Input("readOnlyNodeMaxDelayTime")]
        public Input<int>? ReadOnlyNodeMaxDelayTime { get; set; }

        [Input("readOnlyNodeWeights")]
        private InputList<Inputs.DatabaseEndpointReadOnlyNodeWeightGetArgs>? _readOnlyNodeWeights;

        /// <summary>
        /// Custom read weight allocation. This parameter needs to be set when the value of read_only_node_distribution_type is Custom.
        /// </summary>
        public InputList<Inputs.DatabaseEndpointReadOnlyNodeWeightGetArgs> ReadOnlyNodeWeights
        {
            get => _readOnlyNodeWeights ?? (_readOnlyNodeWeights = new InputList<Inputs.DatabaseEndpointReadOnlyNodeWeightGetArgs>());
            set => _readOnlyNodeWeights = value;
        }

        /// <summary>
        /// ReadWrite or ReadOnly.
        /// </summary>
        [Input("readWriteMode")]
        public Input<string>? ReadWriteMode { get; set; }

        /// <summary>
        /// The number of proxy connections set for the terminal after enabling read-write separation. The minimum value of the proxy connection count is 20.
        /// </summary>
        [Input("readWriteProxyConnection")]
        public Input<int>? ReadWriteProxyConnection { get; set; }

        /// <summary>
        /// Whether to enable read-write separation. Only default endpoint supports this feature.
        /// </summary>
        [Input("readWriteSplitting")]
        public Input<bool>? ReadWriteSplitting { get; set; }

        /// <summary>
        /// Whether to prohibit the terminal from sending write requests to the write node. To avoid having no available connection endpoints to carry write operations, this configuration can only be enabled when the instance has other read-write endpoints.
        /// </summary>
        [Input("writeNodeHaltWriting")]
        public Input<bool>? WriteNodeHaltWriting { get; set; }

        public DatabaseEndpointState()
        {
        }
        public static new DatabaseEndpointState Empty => new DatabaseEndpointState();
    }
}
